<!DOCTYPE HTML>
<html lang="zh-cn" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>中断控制器8259A - 计算机系统结构</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../../favicon.svg">
        <link rel="shortcut icon" href="../../../favicon.png">
        <link rel="stylesheet" href="../../../css/variables.css">
        <link rel="stylesheet" href="../../../css/general.css">
        <link rel="stylesheet" href="../../../css/chrome.css">
        <link rel="stylesheet" href="../../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../../highlight.css">
        <link rel="stylesheet" href="../../../tomorrow-night.css">
        <link rel="stylesheet" href="../../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Part 1</li><li class="chapter-item expanded "><a href="../../../Part1/一. 计算机中的信息表示.html"><strong aria-hidden="true">1.</strong> 计算机中的信息表示</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Part1/计算机中的信息表示/数据性数据的表示方法.html"><strong aria-hidden="true">1.1.</strong> 数据型数据的表示方法</a></li><li class="chapter-item expanded "><a href="../../../Part1/计算机中的信息表示/字符型数据的表示方法.html"><strong aria-hidden="true">1.2.</strong> 字符型数据的表示方法</a></li><li class="chapter-item expanded "><a href="../../../Part1/计算机中的信息表示/计算机中信息的物理表示.html"><strong aria-hidden="true">1.3.</strong> 计算机中信息的物理表示</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Part1/二. 数字逻辑基础.html"><strong aria-hidden="true">2.</strong> 数字逻辑基础</a></li><li class="chapter-item expanded affix "><li class="part-title">Part 2</li><li class="chapter-item expanded "><a href="../../../Part2/一. 概论/概论.html"><strong aria-hidden="true">3.</strong> 概论</a></li><li class="chapter-item expanded "><a href="../../../Part2/二. 指令系统/二. 指令系统.html"><strong aria-hidden="true">4.</strong> 指令系统</a></li><li class="chapter-item expanded "><a href="../../../Part2/三. 中央处理器/中央处理器.html"><strong aria-hidden="true">5.</strong> 中央处理器</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Part2/三. 中央处理器/1. 模型机的总体设计/模型机的总体设计.html"><strong aria-hidden="true">5.1.</strong> 模型机的总体设计</a></li><li class="chapter-item expanded "><a href="../../../Part2/三. 中央处理器/2. 运算部件与运算器/运算部件与运算器.html"><strong aria-hidden="true">5.2.</strong> 运算部件与运算器</a></li><li class="chapter-item expanded "><a href="../../../Part2/三. 中央处理器/3. 模型机的组合逻辑控制器/模型机的组合逻辑控制器.html"><strong aria-hidden="true">5.3.</strong> 模型机的组合逻辑控制器</a></li><li class="chapter-item expanded "><a href="../../../Part2/三. 中央处理器/4. 模型机的微程序控制器/模型机的微程序控制器.html"><strong aria-hidden="true">5.4.</strong> 模型机的微程序控制器</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Part2/四. 存储子系统/存储子系统.html"><strong aria-hidden="true">6.</strong> 存储子系统</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Part2/四. 存储子系统/1. 概述/概述.html"><strong aria-hidden="true">6.1.</strong> 概述</a></li><li class="chapter-item expanded "><a href="../../../Part2/四. 存储子系统/2. 半导体存储原理/半导体存储原理.html"><strong aria-hidden="true">6.2.</strong> 半导体存储原理</a></li><li class="chapter-item expanded "><a href="../../../Part2/四. 存储子系统/3. 主存储器组织/主存储器组织.html"><strong aria-hidden="true">6.3.</strong> 主存储器组织</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Part2/四. 存储子系统/3. 主存储器组织/一. 主存储器的逻辑设计/一. 主存储器的逻辑设计.html"><strong aria-hidden="true">6.3.1.</strong> 主存储器的逻辑设计</a></li><li class="chapter-item expanded "><a href="../../../Part2/四. 存储子系统/3. 主存储器组织/二.动态存储器的刷新/动态存储器的刷新.html"><strong aria-hidden="true">6.3.2.</strong> 动态存储器的刷新</a></li><li class="chapter-item expanded "><a href="../../../Part2/四. 存储子系统/3. 主存储器组织/三.主存储器的校验方法/主存储器的校验方法.html"><strong aria-hidden="true">6.3.3.</strong> 主存储器的校验方法</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.4.</strong> 磁表面存储器</div></li></ol></li><li class="chapter-item expanded "><a href="../../../Part2/五. 输入输出子系统/输入输出系统.html"><strong aria-hidden="true">7.</strong> 输入输出系统</a></li><li class="chapter-item expanded affix "><li class="part-title">Part 3</li><li class="chapter-item expanded "><a href="../../../Part3/一. 微型计算机概述/微型计算机概述.html"><strong aria-hidden="true">8.</strong> 微型计算机概述</a></li><li class="chapter-item expanded "><a href="../../../Part3/二. 微处理器/微处理器.html"><strong aria-hidden="true">9.</strong> 微处理器</a></li><li class="chapter-item expanded "><a href="../../../Part3/三. 8086-8088指令系统/8086-8088指令系统.html"><strong aria-hidden="true">10.</strong> 8086-8088指令系统</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Part3/三. 8086-8088指令系统/1. 概述/概述.html"><strong aria-hidden="true">10.1.</strong> 概述</a></li><li class="chapter-item expanded "><a href="../../../Part3/三. 8086-8088指令系统/2. 寻址方式/寻址方式.html"><strong aria-hidden="true">10.2.</strong> 寻址方式</a></li><li class="chapter-item expanded "><a href="../../../Part3/三. 8086-8088指令系统/3. 指令系统/指令系统.html"><strong aria-hidden="true">10.3.</strong> 指令系统</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Part3/四. 汇编语言程序设计/汇编语言程序设计.html"><strong aria-hidden="true">11.</strong> 汇编语言程序设计</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Part3/四. 汇编语言程序设计/1. 汇编语言基础/汇编语言基础.html"><strong aria-hidden="true">11.1.</strong> 汇编语言基础</a></li><li class="chapter-item expanded "><a href="../../../Part3/四. 汇编语言程序设计/2. 常用伪指令/常用伪指令.html"><strong aria-hidden="true">11.2.</strong> 常用伪指令</a></li><li class="chapter-item expanded "><a href="../../../Part3/四. 汇编语言程序设计/3. DOS功能调用/DOS功能调用.html"><strong aria-hidden="true">11.3.</strong> DOS功能调用</a></li><li class="chapter-item expanded "><a href="../../../Part3/四. 汇编语言程序设计/4. 汇编程序设计基础/汇编程序设计基础.html"><strong aria-hidden="true">11.4.</strong> 汇编程序设计基础</a></li></ol></li><li class="chapter-item expanded "><a href="../../../Part3/五. 输入输出及中断技术/输入输出及中断技术.html"><strong aria-hidden="true">12.</strong> 输入输出及中断技术</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../../Part3/五. 输入输出及中断技术/1. IO系统概述/IO系统概述.html"><strong aria-hidden="true">12.1.</strong> IO系统概述</a></li><li class="chapter-item expanded "><a href="../../../Part3/五. 输入输出及中断技术/2. 简单接口电路及应用/简单接口电路及应用.html"><strong aria-hidden="true">12.2.</strong> 简单接口电路及应用</a></li><li class="chapter-item expanded "><a href="../../../Part3/五. 输入输出及中断技术/3. 中断系统/8086-8088中断系统.html"><strong aria-hidden="true">12.3.</strong> 8086-8088中断系统</a></li><li class="chapter-item expanded "><a href="../../../Part3/五. 输入输出及中断技术/4. 中断控制器8259A/中断控制器8259A.html" class="active"><strong aria-hidden="true">12.4.</strong> 中断控制器8259A</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">计算机系统结构</h1>

                    <div class="right-buttons">
                        <a href="../../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<h1 id="中断处理器-8259a"><a class="header" href="#中断处理器-8259a">中断处理器 8259A</a></h1>
<h2 id="基本结构"><a class="header" href="#基本结构">基本结构</a></h2>
<h3 id="1-引脚图"><a class="header" href="#1-引脚图">1. 引脚图</a></h3>
<p><img src="pics/%E5%BC%95%E8%84%9A%E5%9B%BE.png" alt="引脚图" /></p>
<h3 id="2-内部结构"><a class="header" href="#2-内部结构">2. 内部结构</a></h3>
<p><img src="pics/%E5%86%85%E9%83%A8%E7%BB%93%E6%9E%84.png" alt="内部结构" /></p>
<ul>
<li>
<p>数据总线缓冲器</p>
<ul>
<li>三态双向8位缓冲器，与数据总线低8位D7~D0相连</li>
</ul>
</li>
<li>
<p>读写控制逻辑</p>
<ul>
<li>输入信号: <span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mord mathnormal" style="margin-right:0.02778em;">D</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>、<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>、<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">CS</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>、<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal">A</span><span class="mord">0</span></span></span></span></li>
</ul>
<blockquote>
<p>A0 用于区分控制字(连地址总线最低位)<br />
<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">CS</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span> 为片选</p>
</blockquote>
</li>
<li>
<p>级联缓冲/比较器</p>
<ul>
<li>扩展中断源，主片的CAS2~CAS0输出，从片的CAS2~CS0输入；从片的INT接主片的IRi</li>
</ul>
</li>
<li>
<p>中断请求寄存器IRR</p>
<ul>
<li>某外设有中断请求，则相应位置1</li>
<li>该中断被响应后，相应的请求位清0</li>
</ul>
</li>
<li>
<p>中断屏蔽字寄存器IMR</p>
<ul>
<li>软件设定屏蔽字，为‘1’的位对应的中断被屏蔽</li>
</ul>
</li>
<li>
<p>中断服务寄存器ISR</p>
<ul>
<li>保存所有正在服务的中断源，对应位为‘1’</li>
<li>允许中断嵌套时,ISR中可以有多位被置‘1’</li>
</ul>
</li>
<li>
<p>优先判别器PR</p>
<ul>
<li>综合IRR、IMR和ISR进行判优，并判定是否产生INT生成优先级最高的中断类型号</li>
</ul>
</li>
<li>
<p>控制逻辑</p>
<ul>
<li>根据PR判定结果向CPU发INT信号</li>
<li>接收到CPU第一个<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">NT</span><span class="mord mathnormal">A</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>信号后，ISR对应位置‘1’，且IRR对应位清‘0’</li>
<li>接收到CPU第二个<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">NT</span><span class="mord mathnormal">A</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>信号后，送出优先级最高的中断类型号</li>
</ul>
</li>
</ul>
<h2 id="工作过程"><a class="header" href="#工作过程">工作过程</a></h2>
<p>接收中断请求-&gt;判断是否发INT,生成优先级最高的中断号-&gt;CPU响应，接收应答信号<span class="katex"><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">NT</span><span class="mord mathnormal">A</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>，修改ISR和IRR，送中断号</p>
<p><img src="pics/%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B.png" alt="工作过程" /></p>
<blockquote>
<p>IRR 内, 为1表示有中断请求<br />
中断类型码高五位一般为<code>00001</code>(图中五个x)</p>
</blockquote>
<h2 id="工作方式"><a class="header" href="#工作方式">工作方式</a></h2>
<p>可通过编程设置不同的工作方式</p>
<ul>
<li>工作方式
<ul>
<li>中断优先方式与中断嵌套</li>
<li>屏蔽中断源方式</li>
<li>级联工作方式</li>
<li>终端结束(EOI)处理方式</li>
<li>中断触发方式</li>
</ul>
</li>
</ul>
<h3 id="1-中断优先方式与中断嵌套"><a class="header" href="#1-中断优先方式与中断嵌套">1. 中断优先方式与中断嵌套</a></h3>
<h4 id="1-中断优先方式"><a class="header" href="#1-中断优先方式">1) 中断优先方式</a></h4>
<ul>
<li>固定优先级方式(默认):
<ul>
<li>IR0&gt;IR1&gt;...&gt;IR7, 可通过编程修改优先级顺序</li>
</ul>
</li>
<li>循环优先级方式:
<ul>
<li>自动循环，某中断源得到中断服务之后，其优先级降为最低，原来比它低一级的成为最高，依次排列</li>
</ul>
</li>
</ul>
<blockquote>
<p>例，若初始优先级为IR0&gt;IR1&gt;……&gt;IR7，则对IR4进行服务之后，优先级顺序为:<br />
IR5&gt;IR6&gt;IR7&gt;IR0&gt;IR1&gt;IR2&gt;IR3&gt;IR4</p>
</blockquote>
<h4 id="2-中断嵌套"><a class="header" href="#2-中断嵌套">2) 中断嵌套</a></h4>
<ul>
<li>
<p>普通全嵌套方式</p>
<ul>
<li>中断服务期间，只有比它优先级更高的中断请求才会被响应(没有同级)</li>
</ul>
</li>
<li>
<p>特殊全嵌套方式</p>
<ul>
<li>中断服务期间，可以被同级或比它优先级更高的中断请求所打断</li>
</ul>
<blockquote>
<p>一般用在级联方式，主片8259A可以使用特殊全嵌套方式</p>
</blockquote>
</li>
</ul>
<h3 id="2-屏蔽中断源方式"><a class="header" href="#2-屏蔽中断源方式">2. 屏蔽中断源方式</a></h3>
<h4 id="1-常规屏蔽方式"><a class="header" href="#1-常规屏蔽方式">1) 常规屏蔽方式</a></h4>
<p>设置IMR，某位为“1”则屏蔽对应的中断请求</p>
<h4 id="2-特殊屏蔽方式smm"><a class="header" href="#2-特殊屏蔽方式smm">2) 特殊屏蔽方式(SMM)</a></h4>
<p>使正在处理的中断所对应的IMR位置1，并使对应的ISR位清零</p>
<p>可响应除当前级别优先级中断外的其他所有级别中断</p>
<h3 id="3-级联工作方式"><a class="header" href="#3-级联工作方式">3. 级联工作方式</a></h3>
<p><img src="pics/8259A%E7%BA%A7%E8%81%94%E7%BB%93%E6%9E%84%E7%A4%BA%E6%84%8F%E5%9B%BE.png" alt="8259A级联结构示意图" /></p>
<blockquote>
<p>理论上可以扩展到64个中断源(每个脚都进行扩展 8 * 8)<br />
主片: 直接和CPU连接的中断处理器<br />
从片: 级联连接的中断处理器</p>
</blockquote>
<h3 id="4-中断结束eoi方式"><a class="header" href="#4-中断结束eoi方式">4. 中断结束(EOI)方式</a></h3>
<p>指8259A结束中断事件的处理方式(ISR的清零)</p>
<ul>
<li>
<p>自动中断结束方式</p>
<blockquote>
<p>在第二个INTA信号发送后就认为中断结束(及时中断服务程序未结束)</p>
</blockquote>
</li>
<li>
<p>非自动中断结束方式</p>
<blockquote>
<p>在中断服务程序完成后才清理ISR</p>
</blockquote>
<ul>
<li>正常中断结束方式</li>
<li>特殊中断结束方式</li>
</ul>
</li>
</ul>
<h3 id="5-中断触发方式"><a class="header" href="#5-中断触发方式">5. 中断触发方式</a></h3>
<p>IRR 内某一位为1的条件(为1就表明有中断处理请求)</p>
<ul>
<li>
<p>电平触发方式</p>
<ul>
<li>把中断请求输入端的<strong>高电平</strong>作为中断请求信号</li>
</ul>
<blockquote>
<p>可能导致多次触发</p>
</blockquote>
</li>
<li>
<p>边沿触发方式</p>
<ul>
<li>将中断请求输入端IRi出现的<strong>上升沿</strong>作为中断请求信号</li>
</ul>
</li>
</ul>
<h2 id="内部控制字及编程"><a class="header" href="#内部控制字及编程">内部控制字及编程</a></h2>
<p>可编程8259A: 可通过编程方式写入控制命令设置8259A的工作方式</p>
<p>控制命令分为<strong>初始化命令字ICW1~ICW4</strong>和<strong>操作命令字OCW1~OCW3</strong>，写入后保存在内部的ICW和OCW寄存器组</p>
<blockquote>
<p>初始化命令字: 开始工作前<br />
操作命令字: 工作时</p>
</blockquote>
<p><strong>初始化编程</strong>: 工作之前，CPU向8259A按顺序写2~4字节初始化命令字ICW</p>
<p><strong>操作方式编程</strong>: CPU向8259A送3字节操作命令字OCW，设置操作方式</p>
<h3 id="1-8259a的内部寄存器访问方法"><a class="header" href="#1-8259a的内部寄存器访问方法">1. 8259A的内部寄存器访问方法</a></h3>
<p><img src="pics/8259A%E7%9A%84%E5%86%85%E9%83%A8%E5%AF%84%E5%AD%98%E5%99%A8%E8%AE%BF%E9%97%AE%E6%96%B9%E6%B3%95.png" alt="8259A的内部寄存器访问方法" /></p>
<blockquote>
<p>IRR/ISR的区分: OCW3内容确定<br />
ICW2,3,4的区分: 根据顺序, 也就是说ICW设置有顺序要求</p>
</blockquote>
<h3 id="2-8259a初始化命令字"><a class="header" href="#2-8259a初始化命令字">2. 8259A初始化命令字</a></h3>
<p>在8259A工作之前进行初始化, <strong>按顺序写ICW</strong></p>
<ul>
<li>ICW1（初始化字）</li>
<li>ICW2（中断类型码字）</li>
<li>ICW3（级联控制字）</li>
<li>ICW4（中断结束方式字）</li>
</ul>
<h4 id="3-8259a初始化流程"><a class="header" href="#3-8259a初始化流程">3. 8259A初始化流程</a></h4>
<p><img src="pics/8259A%E5%88%9D%E5%A7%8B%E5%8C%96%E6%B5%81%E7%A8%8B.png" alt="8259A初始化流程" /></p>
<h4 id="初始化字"><a class="header" href="#初始化字">初始化字</a></h4>
<h5 id="1-icw1"><a class="header" href="#1-icw1">1) ICW1</a></h5>
<ul>
<li>写入条件: A0=0（偶地址）；D4=1</li>
<li>作用: 初始化8259A；同时清除ISR、IMR；设置优先级初始(默认)状态、常规屏蔽方式、非自动EOI方式</li>
</ul>
<p><img src="pics/ICW1.png" alt="ICW1" /></p>
<h5 id="2-icw2"><a class="header" href="#2-icw2">2) ICW2</a></h5>
<ul>
<li>条件: A0=1（奇地址）</li>
<li>作用: 初始化时写入中断类型码高5位</li>
</ul>
<p><img src="pics/ICW2.png" alt="ICW2" /></p>
<p>前5位默认位<code>00001</code></p>
<h5 id="3-icw3"><a class="header" href="#3-icw3">3) ICW3</a></h5>
<ul>
<li>条件: A0=1（奇地址）</li>
<li>作用: 设置主从片标志，仅在多片8259A级联时需要初始化</li>
</ul>
<p><img src="pics/ICW3.png" alt="ICW3" /></p>
<h5 id="4-icw4"><a class="header" href="#4-icw4">4） ICW4</a></h5>
<ul>
<li>条件: A0=1（奇地址）</li>
<li>作用: 设置中断结束方式，仅在需要时设置 (ICW1的D0=1)</li>
</ul>
<p><img src="pics/ICW4.png" alt="ICW4" /></p>
<h4 id="示例"><a class="header" href="#示例">示例</a></h4>
<p>以8086/8088微型计算机中使用的单片8259A为例，试对其进行初始化设置，其中ICW1和ICW4的端口地址分别为20H、21H。</p>
<p>实现初始化的程序段如下: </p>
<pre><code class="language-asm">MOV AL, 13H ; 设置ICW1（边沿触发，单片，要写ICW4）
OUT 20H, AL ; 写ICW1
MOV AL , 18H ; 设置ICW2（中断类型码高五位设置为00011）
OUT 21H, AL ; 写ICW2
MOV AL, 0DH ; 设置ICW4（一般全嵌套，非AE01，缓冲方式）
OUT 21H, AL
</code></pre>
<h3 id="3-8259a操作命令字"><a class="header" href="#3-8259a操作命令字">3. 8259A操作命令字</a></h3>
<p>在8259A工作期间，可通过操作命令字(OCW)设置操作方式</p>
<p>操作命令字: OCW1~OCW3，没有写入顺序和时间要求，可独立使用</p>
<p>OCW1写入奇地址，OCW2和OCW3写入偶地址</p>
<ul>
<li>OCW1（中断屏蔽字）</li>
<li>OCW2（中断结束和优先级循环）</li>
<li>OCW3（屏蔽方式和状态读出方式）</li>
</ul>
<h4 id="命令字"><a class="header" href="#命令字">命令字</a></h4>
<h5 id="1-ocw1"><a class="header" href="#1-ocw1">1) OCW1</a></h5>
<ul>
<li>
<p>条件: A0=1（奇地址）</p>
</li>
<li>
<p>作用: 写中断屏蔽字，保存在IMR</p>
</li>
</ul>
<p><img src="pics/OCW1.png" alt="OCW1" /></p>
<h6 id="示例-1"><a class="header" href="#示例-1">示例</a></h6>
<p>若要屏蔽IR5、IR4和IR1引脚上的中断，而允许其余的中断，设置中断屏蔽字</p>
<p>OCW1为: 00110010 （32H）</p>
<h5 id="2-ocw2"><a class="header" href="#2-ocw2">2) OCW2</a></h5>
<ul>
<li>
<p>条件: A0=0（偶地址），特征位 D4D3=00</p>
</li>
<li>
<p>作用: 对8259A发中断结束命令EOI，以及控制优先级循环</p>
</li>
</ul>
<p><img src="pics/OCW2.png" alt="OCW2" /></p>
<h6 id="示例-2"><a class="header" href="#示例-2">示例</a></h6>
<p>若某8259A的OCW2设置为11000011B，试分析此操作命令字所确定的操作方式</p>
<p>分析: 特殊循环优先级，将IR3定为最低优先级。因此，系统中优先级从高到低为IR4、IR5、IR6、IR7、IR0、IR1、IR2、IR3</p>
<h5 id="3-ocw3"><a class="header" href="#3-ocw3">3) OCW3</a></h5>
<ul>
<li>
<p>条件: A0=0（偶地址），特征位 D4D3=01</p>
</li>
<li>
<p>作用: 设置中断屏蔽方式和中断状态查询方式</p>
</li>
</ul>
<p><img src="pics/OCW3.png" alt="OCW3" /></p>
<p><img src="pics/OCW3-2.png" alt="OCW3-2" /></p>
<h3 id="4-8259a编程示例"><a class="header" href="#4-8259a编程示例">4. 8259A编程示例</a></h3>
<p>设两片8259A级联，提供15级向量中断，CAS2～CAS0作为互连线，从片8259A的INT直接连到主片8259A的IR2上</p>
<ul>
<li>主片端口地址020H和021H，中断号为08H～0FH；从片端口地址0A0H和0A1H，中断号为70H～77H；</li>
<li>主、从片的中断请求信号均采用边沿触发方式；</li>
<li>优先级的排列次序为0级最高（主片IR0），依次为1级（主片IR1）、2级（主片IR2，对应从片IR0 ～IR7）、3级～7级（主片的IR3～IR7）</li>
</ul>
<p><img src="pics/8259A%E7%BC%96%E7%A8%8B%E7%A4%BA%E4%BE%8B-%E4%B8%A4%E4%B8%AA8259A%E7%9A%84%E7%BA%A7%E8%81%94.png" alt="两个8259A的级联" /></p>
<pre><code class="language-asm">;对主片8259A的初始化 
    INTM00    EQU   020H           ;主8259A端口，偶地址
    INTM01    EQU   021H           ;主8259A端口，奇地址
    ……      
       MOV  AL, 11H    ;写ICW1，设定边沿触发，级联方式
       OUT  INTM00, AL
       JMP  INTR1      ;延迟,等到8259操作结束，下同
INTR1: MOV AL, 08H     ;写ICW2，设主片中断类型码高5位，IRQ0为08H
       OUT INTM01, AL
       JMP  INTR2
INTR2: MOV  AL, 04H   ;写ICW3，设主片IRQ2级联从片的INT 
       OUT  INTM01, AL
        JMP  INTR3
INTR3:  MOV  AL, 11H   ;写ICW4，设置特殊全嵌套方式，一般EOI方式
          OUT INTM01, AL
         ……

</code></pre>
<blockquote>
<p>转移指令只转移到下一条，为什么？（三个JMP）
为了起到一个延时的作用</p>
</blockquote>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../../Part3/五. 输入输出及中断技术/3. 中断系统/8086-8088中断系统.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../../Part3/五. 输入输出及中断技术/3. 中断系统/8086-8088中断系统.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../../elasticlunr.min.js"></script>
        <script src="../../../mark.min.js"></script>
        <script src="../../../searcher.js"></script>

        <script src="../../../clipboard.min.js"></script>
        <script src="../../../highlight.js"></script>
        <script src="../../../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
