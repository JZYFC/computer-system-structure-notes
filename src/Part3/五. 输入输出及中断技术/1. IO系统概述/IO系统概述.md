# IO 系统概述

## IO系统(回顾)

### IO系统

![IO系统](pics/IO%E7%B3%BB%E7%BB%9F.png)

### IO接口基本组成

![基本组成](pics/IO%E6%8E%A5%E5%8F%A3%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90.png)

### I/O接口与I/O端口

接口中的每个寄存器称为**I/O端口**

通过端口对主机与外设之间传送的信息进行缓存

根据端口存储的信息类型分为：

* 数据端口：输入/输出数据
* 状态端口：外设的状态信息
* 控制端口：控制信息

### 数据传送方式

* 直接程序传送方式
  * 无条件传送方式
  * 查询方式
* 中断方式
* 直接存储器存取方式(DMA)

## 8086/8088端口编址方式

IO编址方式:

* 统一编址
* 独立编址

8088/8086采用**独立编址**方式(但**与存储器共用地址线**)

IO操作只使用20根地址线中的低**16位**: `A15~A0`, 可寻址的IO端口数量为64K(65536)个

IO地址范围: `0 - FFFFH`, 实际使用了 1024 个地址(`0 - 3FFH`), 地址线的地址信号用 $IO/\overline{M}$($\overline{IO}/M$)来区分

![编址方式图例](pics/%E7%BC%96%E5%9D%80%E6%96%B9%E5%BC%8F%E5%9B%BE%E4%BE%8B.png)

### 端口地址

![端口地址](pics/%E7%AB%AF%E5%8F%A3%E5%9C%B0%E5%9D%80.png)

<font color="red">端口地址=接口芯片地址(高位地址) + 片内地址(低位地址)</font>

> 类似于学号 = 学院(专业)编号 + 班号 + 班内编号

## 8086/8088地址译码

根据地址线送来的端口地址选择要访问的端口

选择有

* 全地址译码
* 部分地址译码

<font color="red">I/O系统中，因地址资源丰富，多采用部分地址译码</font>

### 参与译码的信号

* $\overline{IOR}$: IN指令将使总线中的该信号有效
* $\overline{IOW}$: OUT指令将使总线中的该信号有效
* `A15 - A0`:
  * 单端口外设: 16位地址全部参与译码
  * 多端口外设: **高位地址**参与译码, 选择**接口**, **低位地址**用于选择接口内的**段口**

### 例

外设接口有4个端口，地址为2F0H - 2F3H，由A11～A2译码选择接口，而A1、A0用来区分接口中的4个端口。试画出该接口与系统的连接图

> 分析

> * 寻址端口的地址信号最多为16bit，题中仅用12bit，故采用的部分地址译码
> * 该接口电路中含4个端口，片内端口寻址需2位地址信号，其余10位为片选地址信号

![地址范围](pics/%E4%BE%8B1.png)

![译码电路](pics/%E4%BE%8B2.png)
