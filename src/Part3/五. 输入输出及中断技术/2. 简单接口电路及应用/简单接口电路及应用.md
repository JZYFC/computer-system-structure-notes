# 简单接口电路及应用

## 三态门接口

三态门具有数据控制能力, 常用作输入接口

![三态门](pics/%E4%B8%89%E6%80%81%E9%97%A8.png)

### 74LS244

* 8个三态门
* 两个控制端: $\overline{E1}、\overline{E2}$
* 控制端有效时, 外设与总线联通

![引脚图](pics/74LS244%E5%BC%95%E8%84%9A%E5%9B%BE.png)

### 示例

![示例](pics/%E4%B8%89%E6%80%81%E9%97%A8%E7%94%A8%E4%BD%9C%E8%BE%93%E5%85%A5%E6%8E%A5%E5%8F%A3%E7%A4%BA%E4%BE%8B.png)

## 锁存器接口

具备对数据的锁存能力, 常用作输出接口

CPU输出的数据经数据总线送锁存器锁存, 直到设备将数据取走

采用具有信息存储能力的双稳态触发器构成;

![D触发器](pics/D%E8%A7%A6%E5%8F%91%E5%99%A8.png)

### 锁存器芯片74LS273

* 8D触发器, 有锁存能力, 常用作输出接口
* S:异步复位端, 低电平有效
* CP：同步脉冲输入, 上升沿触发

![74LS273](pics/74LS273.png)

### 锁存器芯片74LS374

* 三态输出的8D触发器, 具有对数据的控制能力;
* 既可以用做输入接口, 也可以用做输出接口;
* 输出允许端$\overline{OE}$, 低电平有效

![74LS374](pics/74LS374.png)

### 74LS374作输出接口示例

![74LS374作输出接口示例](pics/74LS374%E4%BD%9C%E8%BE%93%E5%87%BA%E6%8E%A5%E5%8F%A3%E7%A4%BA%E4%BE%8B.png)

### 74LS374作输入接口示例

![74LS374作输入接口示例](pics/74LS374%E4%BD%9C%E8%BE%93%E5%85%A5%E6%8E%A5%E5%8F%A3%E7%A4%BA%E4%BE%8B.png)

## IO接口应用示例

### 例1

外设状态端口地址为`03FBH`, 第5位(bit5)为状态标志（=1忙, =0准备好）

外设数据端口地址为`03F8H`, 写入数据会使状态标志置1; 外设把数据读走后又把它置0

试画出其电路图, 并将BUF中的100个字节数据输出。

#### 电路图

![例1电路图](pics/%E4%BE%8B1%E7%94%B5%E8%B7%AF%E5%9B%BE.png)

#### 控制程序

![流程图](pics/%E4%BE%8B1%E6%B5%81%E7%A8%8B%E5%9B%BE.png)

```asm
        LEA SI, BUF
        MOV CX, 100
AGAIN:  MOV DX, 03FBH   ; 状态端口
WAITT:  IN  AL,DX       ; 读状态端口         
        TEST AL,20H
        JNZ   WAITT    ; 设备   
        MOV DX,03F8H   ; 数据端口
        MOV AL, [SI]
        OUT DX, AL     ; 写数端口
        INC SI
        LOOP  AGAIN
        HLT
```

### 例2

* 根据开关状态在7段数码管上显示数字或符号
* 当4个开关的状态分别为`0000～1111`时，在7段数码管上对应显示’0’～’F’
* 设输出端口的地址为`0F0H`,输入端口地址为`0F1H`

![题目说明](pics/%E4%BE%8B2%E9%A2%98%E7%9B%AE%E8%AF%B4%E6%98%8E.png)

> 发光二极管高电平亮  
> 输入端口: 连开关  
> 输出端口: 连数码管

#### 电路图

![电路图](pics/%E4%BE%8B2%E7%94%B5%E8%B7%AF%E5%9B%BE.png)

> 74LS273作为输出接口. 74LS244作为输入接口  
> DP为小数点指示, 不使用  
> 要发光二极管亮, 则对应的 Q 则应为1  
> 开关关, 低电平; 开关开, 高电平

#### 数码管显示

![数码管显示表](pics/%E4%BE%8B2%E6%95%B0%E7%A0%81%E7%AE%A1%E6%98%BE%E7%A4%BA%E8%A1%A8.png)

> 注意小数点不显示, Dp为0

#### 控制程序

```asm
        ……
Seg7  DB  3FH,06H, 5BH,4FH,66H,6DH, 7DH,07H, 
    7FH,67H,77H, 7CH,39H,5EH,79H,71H
        ……
        LEA    BX, Seg7
        MOV    AH, 0
GOON:   IN     AL, 0F1H   ;读输入端口
        AND    AL, 0FH    ;屏蔽高4位，保留低4位的开关状态 
        MOV    SI, AX      ;计算在Seg7中的位移量
        MOV    AL, [BX+SI]
        OUT    0F0H, AL  ;写输出端口
        JMP    GOON
```
